# PeerVerse

Welcome to the PeerVerse, a decentralized application built on the Internet Computer Protocol (ICP). This README will help you get started with local development.

## 🚀 Prerequisites

Before you begin, ensure you have the following installed:

- [Node.js](https://nodejs.org/) (v16 or later)
- [DFINITY Canister SDK (DFX)](https://internetcomputer.org/docs/current/developer-docs/setup/install/)
- [Git](https://git-scm.com/)
- [wsl]()

## 🛠 Installation

1. Clone the repository:
   ```bash
   git clone [<repository-url>](https://github.com/sorbadek/micha)
   cd micha
   ```

2. Install Node.js dependencies:
   ```bash
   cd src/micha_frontend && npm install
   ```

##  Local Development If you are using windows 

### Starting the Development Environment

1. Start the local Internet Computer replica in the background:
   ```bash
   dfx start --background
   ```

2. Deploy your canisters:
   ```bash
   dfx deploy
   ```

3. Start the development server:
   ```bash
   npm start
   ```

Your application will be available at [http://localhost:8080](http://localhost:8080).

## 📁 Project Structure

```
micha/
├── .dfx/             # DFINITY Canister SDK working directory
├── src/              # Source files
│   ├── micha/        # Main canister code
│   └── micha_assets/ # Frontend assets
├── .env              # Environment variables
├── dfx.json          # DFINITY project configuration
├── package.json      # Node.js dependencies and scripts
└── tsconfig.json     # TypeScript configuration
```

## 🔄 Development Workflow

- After making changes to your backend canister, regenerate the candid interface:
  ```bash
  npm run generate
  ```
  
  This is automatically done when you run `dfx deploy`.

- For frontend development, the development server supports hot-reload.

## 📚 Useful Commands

- Check DFX version:
  ```bash
  dfx --version
  ```

- Stop the local replica:
  ```bash
  dfx stop
  ```

- View canister status:
  ```bash
  dfx canister status
  ```

## 📖 Documentation

For more information, refer to:
- [Internet Computer Documentation](https://internetcomputer.org/docs/current/developer-docs/)
- [Motoko Language Guide](https://internetcomputer.org/docs/current/motoko/main/motoko)
- [DFX Command Reference](https://internetcomputer.org/docs/current/references/cli-reference/dfx-parent)

## Running the project locally

If you want to test your project locally, you can use the following commands:

```bash
# Starts the replica, running in the background
dfx start --background

# Deploys your canisters to the replica and generates your candid interface
dfx deploy
```

Once the job completes, your application will be available at `http://localhost:4943?canisterId={asset_canister_id}`.

If you have made changes to your backend canister, you can generate a new candid interface with

```bash
cd src/micha_backend
```
```bash
dfx deploy
```

at any time. This is recommended before starting the frontend development server, and will be run automatically any time you run `dfx deploy`.

If you are making frontend changes, you can start a development server with

```bash
npm run dev
```

Which will start a server at `http://localhost:8080`, proxying API requests to the replica at port 4943.

### Note on frontend environment variables

If you are hosting frontend code somewhere without using DFX, you may need to make one of the following adjustments to ensure your project does not fetch the root key in production:

- set`DFX_NETWORK` to `ic` if you are using Webpack
- use your own preferred method to replace `process.env.DFX_NETWORK` in the autogenerated declarations
  - Setting `canisters -> {asset_canister_id} -> declarations -> env_override to a string` in `dfx.json` will replace `process.env.DFX_NETWORK` with the string in the autogenerated declarations
- Write your own `createActor` constructor
